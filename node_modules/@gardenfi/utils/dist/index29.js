import { wait as l } from "./index39.js";
function f(o, { emitOnBegin: r, initialWaitTime: t, interval: c }) {
  let n = !0;
  const a = () => n = !1;
  return (async () => {
    let w;
    r && (w = await o({ unpoll: a }));
    const s = await (t == null ? void 0 : t(w)) ?? c;
    await l(s);
    const u = async () => {
      n && (await o({ unpoll: a }), await l(c), u());
    };
    u();
  })(), a;
}
export {
  f as poll
};
