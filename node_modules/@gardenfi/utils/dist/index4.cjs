"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const t=require("@catalogfi/utils"),a=require("viem"),c=require("./index3.cjs"),p=require("./index10.cjs"),d=async(s,u,o,r)=>{if(!r.account)return t.Err("No account found");const n=a.getContract({address:c.with0x(u),abi:a.erc20Abi,client:r});try{const e=await n.read.allowance([c.with0x(r.account.address),c.with0x(o)]);if(BigInt(e)<BigInt(s)){const i=await n.write.approve([c.with0x(o),a.maxUint256],{account:r.account,chain:r.chain});return(await p.waitForTransactionReceipt(r,{hash:i})).status!=="success"?t.Err("Failed to approve"):t.Ok(i)}return t.Ok("Already approved")}catch(e){return t.Err("Failed to approve: "+e)}};exports.checkAllowanceAndApprove=d;
