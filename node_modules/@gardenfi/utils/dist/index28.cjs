"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const s=new Map,i=new Map;let w=0;function M(e,l,C){const u=++w,n=()=>s.get(e)||[],y=()=>{const t=n();s.set(e,t.filter(o=>o.id!==u))},a=()=>{const t=i.get(e);n().length===1&&t&&t(),y()},c=n();if(s.set(e,[...c,{id:u,fns:l}]),c&&c.length>0)return a;const r={};for(const t in l)r[t]=(...o)=>{var h,p;const g=n();if(g.length!==0)for(const b of g)(p=(h=b.fns)[t])==null||p.call(h,...o)};const f=C(r);return typeof f=="function"&&i.set(e,f),a}exports.cleanupCache=i;exports.listenersCache=s;exports.observe=M;
