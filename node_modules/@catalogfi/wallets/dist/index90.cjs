"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const f=require("./index108.cjs"),m=require("./index52.cjs"),g=require("./index72.cjs"),b=require("./index53.cjs"),u=require("./index76.cjs"),d=require("./index71.cjs"),y=require("./index74.cjs"),x=require("./index107.cjs"),a=require("./index42.cjs");function A(e,t){if(e.length!==t.length)throw new f.AbiEncodingLengthMismatchError({expectedLength:e.length,givenLength:t.length});const r=z({params:e,values:t}),n=p(r);return n.length===0?"0x":n}function z({params:e,values:t}){const r=[];for(let n=0;n<e.length;n++)r.push(h({param:e[n],value:t[n]}));return r}function h({param:e,value:t}){const r=l(e.type);if(r){const[n,i]=r;return H(t,{length:n,param:{...e,type:i}})}if(e.type==="tuple")return S(t,{param:e});if(e.type==="address")return w(t);if(e.type==="bool")return E(t);if(e.type.startsWith("uint")||e.type.startsWith("int")){const n=e.type.startsWith("int");return T(t,{signed:n})}if(e.type.startsWith("bytes"))return P(t,{param:e});if(e.type==="string")return q(t);throw new f.InvalidAbiEncodingTypeError(e.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function p(e){let t=0;for(let o=0;o<e.length;o++){const{dynamic:c,encoded:s}=e[o];c?t+=32:t+=y.size(s)}const r=[],n=[];let i=0;for(let o=0;o<e.length;o++){const{dynamic:c,encoded:s}=e[o];c?(r.push(a.numberToHex(t+i,{size:32})),n.push(s),i+=y.size(s)):r.push(s)}return u.concat([...r,...n])}function w(e){if(!b.isAddress(e))throw new m.InvalidAddressError({address:e});return{dynamic:!1,encoded:d.padHex(e.toLowerCase())}}function H(e,{length:t,param:r}){const n=t===null;if(!Array.isArray(e))throw new f.InvalidArrayError(e);if(!n&&e.length!==t)throw new f.AbiEncodingArrayLengthMismatchError({expectedLength:t,givenLength:e.length,type:`${r.type}[${t}]`});let i=!1;const o=[];for(let c=0;c<e.length;c++){const s=h({param:r,value:e[c]});s.dynamic&&(i=!0),o.push(s)}if(n||i){const c=p(o);if(n){const s=a.numberToHex(o.length,{size:32});return{dynamic:!0,encoded:o.length>0?u.concat([s,c]):s}}if(i)return{dynamic:!0,encoded:c}}return{dynamic:!1,encoded:u.concat(o.map(({encoded:c})=>c))}}function P(e,{param:t}){const[,r]=t.type.split("bytes"),n=y.size(e);if(!r){let i=e;return n%32!==0&&(i=d.padHex(i,{dir:"right",size:Math.ceil((e.length-2)/2/32)*32})),{dynamic:!0,encoded:u.concat([d.padHex(a.numberToHex(n,{size:32})),i])}}if(n!==Number.parseInt(r))throw new f.AbiEncodingBytesSizeMismatchError({expectedSize:Number.parseInt(r),value:e});return{dynamic:!1,encoded:d.padHex(e,{dir:"right"})}}function E(e){if(typeof e!="boolean")throw new g.BaseError(`Invalid boolean value: "${e}" (type: ${typeof e}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:d.padHex(a.boolToHex(e))}}function T(e,{signed:t}){return{dynamic:!1,encoded:a.numberToHex(e,{size:32,signed:t})}}function q(e){const t=a.stringToHex(e),r=Math.ceil(y.size(t)/32),n=[];for(let i=0;i<r;i++)n.push(d.padHex(x.slice(t,i*32,(i+1)*32),{dir:"right"}));return{dynamic:!0,encoded:u.concat([d.padHex(a.numberToHex(y.size(t),{size:32})),...n])}}function S(e,{param:t}){let r=!1;const n=[];for(let i=0;i<t.components.length;i++){const o=t.components[i],c=Array.isArray(e)?i:o.name,s=h({param:o,value:e[c]});n.push(s),s.dynamic&&(r=!0)}return{dynamic:r,encoded:r?p(n):u.concat(n.map(({encoded:i})=>i))}}function l(e){const t=e.match(/^(.*)\[(\d+)?\]$/);return t?[t[2]?Number(t[2]):null,t[1]]:void 0}exports.encodeAbiParameters=A;exports.getArrayComponents=l;
