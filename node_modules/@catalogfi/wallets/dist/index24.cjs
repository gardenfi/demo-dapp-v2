"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const r=require("bitcoinjs-lib"),P=(t,i,n=!1)=>{const c=e=>{try{e=r.address.fromBech32(e).data.toString("hex")}catch(s){if(s.message.includes("Mixed-case string")||s.message.includes("too short"))e=r.address.fromBase58Check(e).hash.toString("hex");else throw new Error(s)}return e},d=r.script.fromASM(`
          OP_IF
              OP_SHA256
              ${t.secretHash}
              OP_EQUALVERIFY
              OP_DUP
              OP_HASH160
              ${c(t.recipientAddress.address)}
          OP_ELSE
              ${r.script.number.encode(t.expiryBlocks).toString("hex")}
              OP_CHECKSEQUENCEVERIFY
              OP_DROP
              OP_DUP
              OP_HASH160
              ${c(t.refundAddress.address)}
              OP_ENDIF
            OP_EQUALVERIFY
            OP_CHECKSIG
      `.trim().replace(/\s+/g," ")),o=r.payments[n?"p2sh":"p2wsh"]({redeem:{output:d},network:i});if(!o.address)throw new Error("Could not build address");return{script:d,address:o.address}};exports.getHTLCScript=P;
