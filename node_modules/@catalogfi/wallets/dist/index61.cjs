"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const u=require("./index90.cjs"),D=require("./index76.cjs"),f=require("./index42.cjs"),s=require("./index59.cjs"),p=require("./index91.cjs");function b(c){const{domain:n={},message:e,primaryType:t}=c,a={EIP712Domain:p.getTypesForEIP712Domain({domain:n}),...c.types};p.validateTypedData({domain:n,message:e,primaryType:t,types:a});const o=["0x1901"];return n&&o.push(y({domain:n,types:a})),t!=="EIP712Domain"&&o.push(d({data:e,primaryType:t,types:a})),s.keccak256(D.concat(o))}function y({domain:c,types:n}){return d({data:c,primaryType:"EIP712Domain",types:n})}function d({data:c,primaryType:n,types:e}){const t=h({data:c,primaryType:n,types:e});return s.keccak256(t)}function h({data:c,primaryType:n,types:e}){const t=[{type:"bytes32"}],a=[l({primaryType:n,types:e})];for(const o of e[n]){const[r,i]=T({types:e,name:o.name,type:o.type,value:c[o.name]});t.push(r),a.push(i)}return u.encodeAbiParameters(t,a)}function l({primaryType:c,types:n}){const e=f.toHex(m({primaryType:c,types:n}));return s.keccak256(e)}function m({primaryType:c,types:n}){let e="";const t=k({primaryType:c,types:n});t.delete(c);const a=[c,...Array.from(t).sort()];for(const o of a)e+=`${o}(${n[o].map(({name:r,type:i})=>`${i} ${r}`).join(",")})`;return e}function k({primaryType:c,types:n},e=new Set){const a=c.match(/^\w*/u)?.[0];if(e.has(a)||n[a]===void 0)return e;e.add(a);for(const o of n[a])k({primaryType:o.type,types:n},e);return e}function T({types:c,name:n,type:e,value:t}){if(c[e]!==void 0)return[{type:"bytes32"},s.keccak256(h({data:t,primaryType:e,types:c}))];if(e==="bytes")return t=`0x${(t.length%2?"0":"")+t.slice(2)}`,[{type:"bytes32"},s.keccak256(t)];if(e==="string")return[{type:"bytes32"},s.keccak256(f.toHex(t))];if(e.lastIndexOf("]")===e.length-1){const a=e.slice(0,e.lastIndexOf("[")),o=t.map(r=>T({name:n,type:a,types:c,value:r}));return[{type:"bytes32"},s.keccak256(u.encodeAbiParameters(o.map(([r])=>r),o.map(([,r])=>r)))]}return[{type:e},t]}exports.encodeType=m;exports.hashDomain=y;exports.hashStruct=d;exports.hashTypedData=b;
